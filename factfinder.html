<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" lang="en" xml:lang="en">

<head>
	<title>Fact Finder</title>
	<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
	<meta http-equiv="Content-Language" content="en-us" />
	<link href="../css/factfinder.css" rel="stylesheet" type="text/css" />
	<script src="xlib/mdcore.js"></script>
	<script src="xlib/mdinput.js"></script>
	<script src="xlib/mdtemplate.js"></script>
	<script src="xlib/mdfactfinder.js"></script>
	<script>
		function getInitData(  ) {

			var data = {
					attributes:[
						{ href: "javascript:;", hreftxt: "Population", attribute:"population" },
						{ href: "javascript:;", hreftxt: "Age", attribute:"age" },
						{ href: "javascript:;", hreftxt: "Business", attribute:"business" },
						{ href: "javascript:;", hreftxt: "Education", attribute:"education" },
						{ href: "javascript:;", hreftxt: "Housing", attribute:"housing" }
						],
					content:{					
						field1:"field1 data", 
						field2:"field2 data", 
						field3:{selected:["1","2"], 0:'Volvo', 1:'Saab', 2:'Mercedes', 3:'Audi'}
						}
				};

			return data;
		}

		function findFacts ( entity, attribute, callback ) {

			// In practice: make a request for the data given by criteria for the given entity.
			var node, data;

			switch( attribute ) {

				case "population":
					node = x$(".templates .template2").getNode();
					data = {
						field1:"field1 data", 
						field2:"field2 data", 
						field3:{selected:["1","2"], 0:'Volvo', 1:'Saab', 2:'Mercedes', 3:'Audi'}
					};
					break;
				case "education":
					node = x$(".templates .template1").getNode();
					data = {
						field1:"field1 data", 
						field2:"field2 data", 
						field3:{selected:["1","2"], 0:'Volvo', 1:'Saab', 2:'Mercedes', 3:'Audi'}
					};
					break;
			}

			callback( data, node );
		}

		x$.ready( function() {
				var ff = new x$.factFinder( x$("#city").getNode(), { data : getInitData() , factFinder:findFacts } );
			}
		);
	</script>
</head></head>

<body>

<!-- START OF factfinder -->
<div class="factfinder" id="city">

	<!-- START OF factfinder-header DIV -->

	<div class="factfinder-header clearfix">

		<div class="searcharea">

			<h3>search</h3>

			<form name="search" action="search.html" class="clearfix">

				<input id="searchbox" type="text" size="20"/>

				<a href="javascript:;" id="searchanchor">GO</a>

			</form>

		</div>

	</div>

	<!-- END OF factfinder-header DIV -->

	<!-- START OF factfinder-main DIV -->

	<div class="factfinder-main clearfix">
		
		<!-- START OF factfinder-nav div -->	
		
		<div class="factfinder-nav">

			<ul class="factfinder-ul">

				<li><a data-bind="href"><span data-bind="hreftxt"></span></a></li>

			</ul>

		</div>

		<!-- END OF factfinder-nav div -->

		<!-- START OF content div -->

		<div class="factfinder-content">

			<div class="content-details">

			</div>
		</div>

		<!-- END OF content div -->
	
	</div>
	<!-- END OF factfinder-main DIV -->

	<!-- START OF factfinder-footer -->
	<div class="factfinder-footer"><p>footer information</p></div>
	<!-- END OF factfinder-footer -->

</div>
<!-- END OF factfinder -->
<div class="templates">

	<div class="template1">

		<select data-bind="field3" multiple="multiple">
		 	
		 	<option value="1">Volvo</option>
		  
		  	<option value="2">Saab</option>
		  
		  	<option value="3">Mercedes</option>
		  
		  	<option value="4">Audi</option>

		</select>

		<select data-bind="field3">
		</select>

		<a data-bind="somelink">A test anchor</a>
	</div>

	<div class="template2">

		<div>	
			<select data-bind="field3"  multiple="multiple"></select>
		</div>
		<div>
			<label id="labl" data-bind="field2"></label>
		</div>
		<div>
			<input type="text" data-bind="field1"></input>
		</div>
	</div>

</div>

</body>

</html>